<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HEB Grocery Agent</title>
    <link rel="stylesheet" href="popup.css" />
  </head>
  <body>
    <div class="container">
      <header>
        <h1>
          <svg class="cart-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="9" cy="21" r="1"/>
            <circle cx="20" cy="21" r="1"/>
            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
          </svg>
          HEB Grocery Agent
        </h1>
        <p class="subtitle">
          Paste your grocery list below and let the agent shop for you
        </p>
      </header>

      <section class="section">
        <div class="section-header">
          <h2>Shopping List</h2>
          <div class="button-group-small">
            <button id="cleanListBtn" class="btn-secondary btn-with-icon">
              <svg class="btn-icon-small" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="m11 4-.5-1-.5 1-1 .125.834.708L9.5 6l1-.666 1 .666-.334-1.167.834-.708zm8.334 10.666L18.5 13l-.834 1.666-1.666.209 1.389 1.181L16.834 18l1.666-1.111L20.166 18l-.555-1.944L21 14.875zM6.667 6.333 6 5l-.667 1.333L4 6.5l1.111.944L4.667 9 6 8.111 7.333 9l-.444-1.556L8 6.5zM3.414 17c0 .534.208 1.036.586 1.414L5.586 20c.378.378.88.586 1.414.586s1.036-.208 1.414-.586L20 8.414c.378-.378.586-.88.586-1.414S20.378 5.964 20 5.586L18.414 4c-.756-.756-2.072-.756-2.828 0L4 15.586c-.378.378-.586.88-.586 1.414zM17 5.414 18.586 7 15 10.586 13.414 9 17 5.414z"/>
              </svg><span class="btn-text-content">Clean List</span>
            </button>
            <button id="loadExampleBtn" class="btn-secondary">Load Example</button>
            <button id="settingsBtn" class="btn-icon" title="Settings">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                <path d="M475.584,192h-61.497l44.81-44.898c13.871-13.925,13.855-36.435-0.065-50.301l-42.335-42.357
                  c-14.652-14.603-38.316-14.603-52.915-0.004L320,97.902V36.416C320,16.314,303.686,0,283.584,0h-55.168
                  C208.314,0,192,16.314,192,36.416v61.486L148.397,54.42c-14.578-14.578-38.242-14.578-52.865-0.005L53.135,96.833
                  c-13.887,13.834-13.904,36.344-0.046,50.254L97.913,192H36.416C16.314,192,0,208.314,0,228.416v55.168
                  C0,303.686,16.314,320,36.416,320h61.498l-43.51,43.597c-14.566,14.665-14.551,38.288,0.036,52.875l41.063,41.084
                  c14.652,14.603,38.316,14.603,52.915,0.004L192,414.098v61.486C192,495.686,208.314,512,228.416,512h55.168
                  C303.686,512,320,495.686,320,475.584v-61.486l43.603,43.483c14.578,14.578,38.242,14.578,52.865,0.005l41.096-41.117
                  c14.59-14.59,14.621-38.233,0.043-52.86L414.086,320h61.498C495.686,320,512,303.686,512,283.584v-55.168
                  C512,208.314,495.686,192,475.584,192z M469.333,277.333h-69.12c-32.86,0-49.34,39.723-26.131,62.983l49.598,49.697
                  l-33.649,33.666l-50.573-50.433c-22.915-22.915-62.125-6.648-62.125,25.772v70.315h-42.667v-70.315
                  c0-32.421-39.211-48.687-62.146-25.752l-50.552,50.413L88.32,390.013l49.596-49.695c23.211-23.261,6.731-62.985-26.129-62.985
                  h-69.12v-42.667h69.12c32.86,0,49.34-39.723,26.131-62.983l-49.599-49.696l33.65-33.667l50.572,50.433
                  c22.915,22.915,62.125,6.648,62.125-25.772V42.667h42.667v70.315c0,32.421,39.211,48.687,62.146,25.752l50.552-50.413
                  l33.65,33.667l-49.597,49.694c-23.211,23.262-6.731,62.985,26.129,62.985h69.12V277.333z"/>
                <path d="M256,170.667c-47.131,0-85.333,38.202-85.333,85.333s38.202,85.333,85.333,85.333s85.333-38.202,85.333-85.333
                  S303.131,170.667,256,170.667z M256,298.667c-23.567,0-42.667-19.099-42.667-42.667s19.099-42.667,42.667-42.667
                  s42.667,19.099,42.667,42.667S279.567,298.667,256,298.667z"/>
              </svg>
            </button>
          </div>
        </div>
        <textarea
          id="shoppingListInput"
          rows="10"
          placeholder="Paste or type your grocery list...

Example:
[Produce]
1 large Sweet Onion (finely chopped)
1 cup Carrots

[Dairy]
1 cup Milk"
        ></textarea>
        <div class="options">
          <label class="checkbox-label">
            <input type="checkbox" id="hebBrandOnlyCheckbox" />
            <span>HEB brand only</span>
          </label>
        </div>
      </section>

      <section class="controls">
        <div class="status-badge" id="statusBadge">Status: Idle</div>
        <div class="button-group">
          <button id="cancelBtn" class="btn-secondary" disabled>Cancel</button>
          <button id="startBtn" class="btn-primary">Start Shopping</button>
        </div>
      </section>

      <section class="section">
        <div class="section-header">
          <h2>Items</h2>
          <span id="itemCount" class="count-badge">0 items</span>
        </div>
        <div id="itemsList" class="items-list">
          <div class="empty-state">Items will appear once you start shopping</div>
        </div>
      </section>

      <section class="section">
        <div class="section-header">
          <h2>Log</h2>
          <button id="clearLogsBtn" class="btn-text">Clear</button>
        </div>
        <div id="logsList" class="logs-list">
          <div class="empty-state">Logs will appear here</div>
        </div>
      </section>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal hidden">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Settings</h2>
          <button id="closeSettingsBtn" class="btn-icon">×</button>
        </div>
        <div class="modal-body">
          <div class="setting-group">
            <label class="setting-label">
              <input type="checkbox" id="enableCleanupCheckbox" />
              <span>Enable Smart Cleanup</span>
            </label>
            <p class="setting-description">
              Automatically fix typos, standardize names, and remove duplicates from your shopping list
            </p>
          </div>

          <div class="setting-group">
            <label class="setting-label">AI Provider</label>
            <select id="aiProviderSelect" class="setting-input">
              <option value="none">None (String Matching Only)</option>
              <option value="groq">Groq (Llama 3.3 - Fast & Free)</option>
              <option value="openai">OpenAI (GPT-4)</option>
              <option value="anthropic">Anthropic (Claude)</option>
            </select>
          </div>

          <div class="setting-group" id="apiKeyGroup">
            <label class="setting-label">API Key</label>
            <input type="password" id="apiKeyInput" class="setting-input" placeholder="Enter your API key" />
            <p class="setting-description">
              Your API key is stored locally and never sent anywhere except to your chosen provider
            </p>
          </div>
        </div>
        <div class="modal-footer">
          <button id="saveSettingsBtn" class="btn-primary">Save Settings</button>
        </div>
      </div>
    </div>

    <!-- Cleanup Preview Modal -->
    <div id="cleanupModal" class="modal hidden">
      <div class="modal-content modal-wide">
        <div class="modal-header">
          <h2>List Cleanup Preview</h2>
          <button id="closeCleanupBtn" class="btn-icon">×</button>
        </div>
        <div class="modal-body">
          <div id="cleanupSummary" class="cleanup-summary"></div>
          <div id="cleanupChanges" class="cleanup-changes"></div>
        </div>
        <div class="modal-footer">
          <button id="cancelCleanupBtn" class="btn-secondary">Cancel</button>
          <button id="applyCleanupBtn" class="btn-primary">Apply Changes</button>
        </div>
      </div>
    </div>

    <script src="popup.js"></script>
  </body>
</html>

